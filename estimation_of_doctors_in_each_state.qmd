---
title: "Estimation of Doctors in Each State"
author: "Yanzun Jiang"
format: pdf
---

```{r}
#| include: false
#| warning: false
#| message: false

# Workspace setup
library(tidyverse)
```

```{r}
#| include: false
#| warning: false
#| message: false

# Read data from the data file from IPUMS
data <- read_csv("raw_data.csv")
```

```{r}
#| warning: false
#| message: false

# Count the number of doctors by state (STATEICP)
state_doctor_count <- data %>%
  filter(EDUCD == 116) %>%
  group_by(STATEICP) %>%
  summarise(n = n()) %>%
  arrange(desc(n))

# Record number of doctors in CA
doctor_in_ca <- state_doctor_count %>%
  filter(STATEICP == 71) %>%
  pull(n)

state_respondant_count <- data %>%
  group_by(STATEICP) %>%
  summarise(n = n()) %>%
  arrange(desc(n))

total_respondents_california <- 391171
state_doctor_count %>% mutate(
  estimated = round(total_respondents_california * n / doctor_in_ca),
  actual = state_respondant_count$n,
  diff = actual - estimated
)
```
